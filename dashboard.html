<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fn Blogs | Dashboard</title>
    <!-- EXTERNAL FILE CSS -->
    <link rel="stylesheet" href="style.css">
    <!-- BOOTSTRAP -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- FONT FAMILY -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mooli&display=swap" rel="stylesheet">

    
    <!-- FONT AWEOMSE CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!--ANIMATE CDN  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
</head>

<body>
<!-- LOADER START -->
<div class="container-fluid lo d-flex flex-row justify-content-center align-items-center" id="lo">
<div class="typewriter" id="type">
    <div class="slide"><i></i></div>
    <div class="paper"></div>
    <div class="keyboard"></div>
</div>
</div>
<!-- LOADER END -->
    <!-- TOP BUTTON -->
    <a href="#top">
    <button class="btn position-fixed topbtn"  id="#"><i class="fa fa-arrow-up" aria-hidden="true"></i></button>
</a>
    <!-- TOP HEADER -->
     <!-- CREATE POST -->
     <!-- <button class="btn" id="createpost"><i class="fa-solid fa-pen-to-square"></i></button> -->
<!-- CREATE POST -->
     <div class="container-fluid py-2  header d-flex flex-row justify-content-between">
        <div class="col-6 " id="dat">1</div>
        <div class="col-6 d-flex justify-content-end">
            <tr>
                <td><i class="fa-brands fa-facebook-f px-2"></i></td>
                <td><i class="fa-brands fa-instagram px-2"></i></td>
                <td><i class="fa-brands fa-github px-2"></i></td>
                <td><i class="fa-solid fa-globe px-2"></i></td>
                <!-- <td><i class="fa-solid fa-user"></i></td> -->
            </tr>
        </div>
    </div>
    <!-- TOP HEADER -->
    <!-- LOGO HEADER -->
    <div class="container col-12 text-center align-items-center flex-row justify-content-center">
        <a class="navbar-brand container col-12 text-center align-items-center flex-row justify-content-center"
            href="#">
            <h4>fn.Blogs</h4>
        </a>
    </div>
    <!-- LOGO HEADER -->

<!-- OOFCANVAS  START-->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasRightLabel">User Information</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body d-flex justify-content-around flex-column">
        <div id="canbody">
        <h2 class="text-center">No User Find</h2>
      <!-- <h4>Name:</h4>
      <h4>email:</h4>
      <h4>age:</h4>
      <h4>gender:</h4>
      <h4>dob:</h4>
      <h4>profession:</h4>
<h4>natinaluty </h4> -->
</div>
    <button class="btn" id="logout"> Logout <i class="fa fa-sign-out" aria-hidden="true"></i></button>
</div>
  </div>
<!-- OFFCANVAS END -->
    <!-- NAVBAR -->
    <nav class="container-fluid navbar navbar-expand-lg navbar-light">
        <div class="container-fluid navbc">

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav m-auto mb-2 d-flex col-7  text-uppercase justify-content-around">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Tech</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Business</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Pakistan</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Sports</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">IT</a>
                    </li>
                </ul>
                <form class="d-flex">
               
     
                    <button class="btn " style="border-radius:30px;" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"><i class="fa-solid fa-user"></i> <span id="nameofuser"></span> <i class="fa fa-caret-down" aria-hidden="true"></i></button>
                    <!-- <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"> -->
                    <!-- <button class="btn btn-outline-success" type="submit">Search</button> -->
                </form>
            </div>
        </div>
    </nav>
    <!-- NAVBAR -->
    <!-- MAIN START-->
    <div class="container-fluid main d-flex flex-row justify-content-between my-2">
        <div class="col-6 d-flex flex-column justify-content-center align-items-center">
            <img src="img/img1.jpg" class="img-fluid i1 animate__fadeInLeft" alt="">
            <div>
            <h1 class="animate__animated animate__fadeInLeft">How To Write Blogs</h1>
       <!-- <button class="animate__animated animate__fadeInLeft mx-1" id="cbr">Create A Blog</button> -->
    </div>    
    </div>
        <div class="col-5 d-flex flex-column justify-content-center">
            <img src="img/img2.jpg" class="img-fluid" alt="">
            <h2 class="py-3 animate__animated animate__fadeInRight">Your Thoughts, Your Blog</h2>
        </div>
    </div>
    <!-- MAIN END-->
      <!-- MAIN START-->
      <h3 class="text-center my-4">TOP NEWS</h3>
       <div class="container-fluid main1  d-flex flex-lg-row flex-md-column flex-column">
        <div class="col-lg-10  d-flex flex-lg-row flex-md-column flex-sm-column col-12 ">
        <div class="col-lg-4 col-4 position-relative d-flex flex-column justify-content-center align-items-center">
            <img src="img/img 3 (1).jpeg" class="img-fluid" alt="">
            <div class="position-absolute  text-center col-10 p-2 d-flex justify-content-center flex-column align-items-center">
                <h5>Pak Suzuki Begins Export Bangladesh , Afgansitan</h5>
                <span>Fasih -August 5,2024 </span>
            </div>
        </div>
        <div class="col-lg-4 col-4 position-relative d-flex flex-column justify-content-center align-items-center">
            <img src="img/img5.jpeg" class="img-fluid" alt="">
            <div class="position-absolute  text-center col-10 p-2 d-flex justify-content-center flex-column align-items-center">
                <h5>Toyota Reports $8.50 Billio Profit</h5>
                <span>Fasih -August 2,2024 </span>
            </div>
        </div>
        <div class="col-lg-4 col-4 position-relative d-flex flex-column justify-content-center align-items-center">
            <img src="img/img4.jpeg" class="img-fluid" alt="">
            <div class="position-absolute  text-center col-10 p-2 d-flex justify-content-center flex-column align-items-center">
                <h5>Honda Altas Plans rs 5 billion hybrid plant</h5>
                <span>Fasih -July 24,2024 </span>
            </div>
        </div>
        </div>
        <div class="col-lg-2 col-md-10 col-sm-12 col-12 py-2">
            <h5 class="text-center">
                Most Popular
            </h5>
            <BR>
            <div>
                <span>Pakistan:<BR></span><BR>
                <h6>
                    Pakistanâ€™s Renowned Gynecologist Dr. Zeryab Sethna Honored With Hilal-e-Imtiaz</h6>
            </div>
        </div>
       </div>
       <div class="container-fluid my-3 d-flex justify-content-center">
       <button class="animate__animated animate__fadeInLeft mx-1" id="cbr">Create A Blog</button>
   <!-- MAIN END-->
</div>


   <!-- MAIN START -->
<div class="container-fluid d-flex my-5 flex-column justify-content-center align-items-center">
    <div class="col-6 d-flex flex-column justify-content-center" id="postlabelshow">
        <label for="">Post Your Blogs Here</label>
        <textarea name="" id="area" placeholder="Enter post here"></textarea>
<button id="postbtn" class="col-2 my-2">Add Blog</button>
    </div>
</div>
<div class="container-fluid d-flex my-5 flex-column justify-content-center align-items-center">
    <div class="col-10 d-flex flex-column justify-content-center" id="main">
<!-- <div class="box d-flex flex-column">
 <div class="d-flex justify-content-between">
   <div class="d-flex align-items-center ">
    <h3> Name </h3>
    <span class="px-2">(time)</span>
</div>
    <div>
        <button class="ed" data-id="">Edit</button>
        <button class="de" data-id="">del</button>
    </div>
 </div>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Iste, magnam!</p>
</div> -->
    </div>
</div>
   <!-- MAIN END -->
    <!-- <script src="index.html"></script> -->
      <!-- EXTENEL FILE LINK -->
    <script src="app.js" type="module"></script>
<script type="module"> 
    import { getAuth,addDoc, updateDoc,deleteDoc ,collection, doc,db,onAuthStateChanged,getDocs,signOut } from "./files/config.mjs";

const auth = getAuth();
onAuthStateChanged(auth,  async (user) => {
  if (user) {
    // User is signed in, see docs for a list of available properties
    // https://firebase.google.com/docs/reference/js/auth.user
    const uid = user.uid;

document.getElementById("nameofuser").innerHTML=`${user.email.split("@")[0]}`

var showvr=await getDocs(collection(db, "hack"));
showvr.forEach(element => {
    // console.log(user.email);
    var canbody=document.getElementById("canbody")

    if(element.data().email ===user.email){
        // console.log(element.data());
        canbody.innerHTML=`
          <h4>Name :  ${element.data().name}</h4>
      <h4>email: ${element.data().email}</h4>
      <h4>age: ${element.data().age}</h4>
      <h4>gender: ${element.data().gender}</h4>
      <h4>dob: ${element.data().dob}</h4>
      <h4>profession: ${element.data().profession}</h4>
<h4>natinaluty  ${element.data().country}</h4> 
  
        `;

    }

    
});

    // ...
  } else {
    location.href="index.html"
    // User is signed out
    // ...
  }
});


var logout = document.getElementById("logout");
logout.addEventListener("click", () => {
  console.log("fas");
  
    signOut(auth)
    .then(() => {
        console.log("User signed out");
        // alert()
        location.href = "index.html"; // Redirect to login page
      }).catch((error) => {
        location.href="dasboard.html"
        console.error("Sign out error:", error);
      });


});
document.getElementById("postlabelshow").style.opacity=0;
document.getElementById("cbr").addEventListener("click",()=>{
    document.getElementById("postlabelshow").style.opacity=1;
})
onAuthStateChanged(auth, (user)=>{
var postbtn=document.getElementById("postbtn");
postbtn?.addEventListener("click",async()=>{
    var area=document.getElementById("area").value;
// console.log(area);
var date=new Date()

try {
    const docRef =  addDoc(collection(db, "texthack"), {
   name123:user.email.split("@")[0],
     msg:area,
    day:date.toString().split(" ").slice(0,5)

});
alert("Blogs Is Added IN Your Feed")
document.getElementById("msgjok").style.display="block";
setTimeout(() => {
  document.getElementById("msgjok").style.display="none";
}, 1000);

  } catch (e) {
    console.error("Error adding document: ", e);
  }
})

})

var showvr=await getDocs(collection(db, "texthack"));
// console.log(showvr);
showvr.forEach(element => {
    // console.log(element.data().name123);
    // console.log(element.id);
    
    var main=document.getElementById("main")
    main.innerHTML+=`
    <div class="box1 d-flex flex-column">
        <div class="d-flex justify-content-between">
            <div class="d-flex align-items-center ">
    <h3>${element.data().name123}</h3>
    <span class="px-2">(${element.data().day})</span>
    </div>
    <div>
        <button class="ed" data-id="${element.id}">Edit</button>
        <button class="de" data-id="${element.id}">del</button>
        </div>
        </div>
        <p>${element.data().msg}</p>
        </div>`;
        
        var editbtn=document.querySelectorAll(".ed");
        editbtn.forEach((btn) => {
            btn.addEventListener("click",(e)=>{
                // console.log(btn.parentElement.parentElement.firstElementChild.firstElementChild.innerHTML);
                const washingtonRef = doc(db, "texthack", btn.getAttribute("data-id"));
                var newmsg=prompt("Enter New Msg",btn.parentElement.parentElement.nextElementSibling.innerHTML)
                updateDoc(washingtonRef, {
          name:btn.parentElement.parentElement.firstElementChild.firstElementChild.innerHTML,
          msg:newmsg,
          //    day:date.toString().split(" ").slice(0,5)
        });
            })
    });
    var de=document.querySelectorAll(".de");
    de.forEach((btn1) => {
        btn1.addEventListener("click",(e)=>{
            // console.log(btn1.parentElement.parentElement.parentElement);
            deleteDoc(doc(db, "texthack",btn1.getAttribute("data-id")));
            btn1.parentElement.parentElement.parentElement.remove()

        })
    })

});
    </script>
    <!-- BOOTSTRAP -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</body>

</html>
